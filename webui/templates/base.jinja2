<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="format-detection" content="telephone=no">
    <title>{% block title %}{% endblock %}</title>
    {#    <style>#}
    {#        body {#}
    {#            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";#}
    {#            line-height: 1.35;#}
    {#        }#}
    {#    </style>#}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/css/foundation.min.css"
          integrity="sha512-TgmH0v8FUwmsr3yDgd5PTCgR6lRZ2Q5c7KsUNTHcoxZpOExCX16MYECIL4xdRQOhQlz7pCnZlmA4zda58QWxBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.min.css"
          integrity="sha512-kDmbIQZ10fxeKP5NSt3+tz77HO42IJiS+YPIirOIKTdokl4LtuXYo3NNvq9mTAF+rzdV1plp0sm9E6nvtVpnFQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>

        .content {
            max-width: 1280px;
            margin: auto;
            padding: 8px;
            font-size: 0.875rem;
        }

        .footer-container {
            padding: 0 8px;
        }

        .footer {
            max-width: 1280px;
            margin: auto;
            padding: 8px;
            font-size: 0.875rem;
        }

        .settings {
            max-width: 1280px;
            margin: auto;
            padding: 8px;
            font-size: 0.875rem;
        }

        #search {
            width: 100%;
        }

        .menubar {
            max-width: 1280px;
            flex: 1 1 auto;
            margin: auto;
            display: flex;
            padding: 0 8px;
        }

        .top-bar-right {
            width: 50%;
        }

        .menu .menu-text {
            padding-left: 0;
        }

        .top-bar input {
            max-width: 100%;
        }

        .input-group {
            margin-bottom: 0;
        }

        .mono {
            font-family: monospace;
            font-size: 0.825rem;
        }
    </style>
    {% block head %}{% endblock %}
</head>
<body>

<div class="top-bar">
    <div class="menubar">
        <div class="top-bar-left">
            <ul class="menu">
                <li class="menu-text">Haruka's Aleo Explorer</li>
                <li><a href="/">Home</a></li>
                <li><a href="/blocks">Blocks</a></li>
                <li><a href="/leaderboard">Leaderboard</a></li>
                <li><a href="/nodes">Nodes</a></li>
            </ul>
        </div>
        <div class="top-bar-right">
            <ul class="menu">
                <!--suppress HtmlUnknownTag -->
                <form id="search" action="/search">
                    <div class="input-group">
                        <input class="input-group-field" type="search" name="q" value="{{ query }}" placeholder="Search (block height, object id, object id prefix)">
                        <div class="input-group-button">
                            <button type="submit" class="button">Search</button>
                        </div>
                    </div>
                </form>
            </ul>
        </div>
    </div>
</div>
{% block content %}{% endblock %}
<div class="footer-container">
    <div class="settings">
        Timezone display: <a onclick="toggle_timezone()"><span id="timezone-setting"></span></a>
    </div>
    <div class="footer">
        <a href="https://github.com/HarukaMa/aleo-explorer">Open source</a> Aleo explorer made by Haruka.{% if "CLOUDFLARE" | get_env %} Contains CloudFlare analytics.{% endif %}
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/js/foundation.min.js"
        integrity="sha512-+CnEgueYRDzx2s3IIAOpZd8HeOfrSbK3loeHw0jXJODAe3eFROHpBxEsun2kU+sZCaoAA0eFJrhfVV3RGG50GA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(document).foundation()

    function utc_to_local() {
        const times = $(".time")
        for (const time of times) {
            const text = time.innerText
            const date = new Date(Date.parse(text.replace(" ", "T") + "Z"))
            time.innerText = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`
        }
    }

    function local_to_utc() {
        const times = $(".time")
        for (const time of times) {
            const text = time.innerText
            const date = new Date(text)
            time.innerText = `${date.getUTCFullYear()}-${(date.getUTCMonth() + 1).toString().padStart(2, '0')}-${date.getUTCDate().toString().padStart(2, '0')} ${date.getUTCHours().toString().padStart(2, '0')}:${date.getUTCMinutes().toString().padStart(2, '0')}:${date.getUTCSeconds().toString().padStart(2, '0')}`
        }
    }

    function toggle_timezone() {
        if (localStorage.getItem("timezone") === "local") {
            localStorage.setItem("timezone", "utc")
            $("#timezone-setting").text("UTC")
            local_to_utc()
        } else {
            localStorage.setItem("timezone", "local")
            $("#timezone-setting").text("Local")
            utc_to_local()
        }
    }


    let timezone_setting = localStorage.getItem("timezone")
    if (timezone_setting === null) {
        timezone_setting = "local"
        localStorage.setItem("timezone", "local")
    }

    if (timezone_setting === "local") {
        utc_to_local()
        $("#timezone-setting").text("Local")
    } else {
        $("#timezone-setting").text("UTC")
    }


</script>
</body>
</html>